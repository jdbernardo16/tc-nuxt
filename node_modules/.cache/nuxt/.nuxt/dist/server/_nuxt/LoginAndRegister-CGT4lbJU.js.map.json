{"file":"LoginAndRegister-CGT4lbJU.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIM,UAAA,EAAE,EAAE,IAAI,QAAQ;AACtB,UAAM,QAAQ,SAAS;AACR,cAAU;AACzB,UAAM,EAAE,WAAW,WAAW,cAAc,uBAAA,IAA2B,QAAQ;AACzE,UAAA,WAAW,IAAI,EAAE,OAAO,IAAI,UAAU,IAAI,UAAU,IAAI;AACxD,UAAA,WAAW,IAAI,OAAO;AACtB,UAAA,UAAU,IAAI,EAAE;AAChB,UAAA,eAAe,IAAI,EAAE;AAE3B,UAAM,iBAAiB,MAAM;AACrB,UAAA,MAAM,MAAM,WAAW,kBAAkB;AACzC,iBAAS,QAAQ;AAAA,MACV,WAAA,MAAM,MAAM,WAAW,YAAY;AAC1C,iBAAS,QAAQ;AAAA,MAAA,OACd;AACH,iBAAS,QAAQ;AAAA,MAAA;AAAA,IAEzB;AACA,UAAM,OAAO,gBAAgB,EAAE,WAAW,MAAM;AA8D1C,UAAA,YAAY,SAAS,MAAM;AACzB,UAAA,SAAS,UAAU,SAAS;AAC5B,eAAO,EAAE,iCAAiC;AAAA,MAAA,WACnC,SAAS,UAAU,YAAY;AACtC,eAAO,EAAE,kCAAkC;AAAA,MAAA,WACpC,SAAS,UAAU,kBAAkB;AAC5C,eAAO,EAAE,iCAAiC;AAAA,MAAA;AAAA,IAC9C,CACH;AAEK,UAAA,aAAa,SAAS,MAAM;AAC1B,UAAA,SAAS,UAAU,SAAS;AAC5B,eAAO,EAAE,wBAAwB;AAAA,MAAA,WAC1B,SAAS,UAAU,YAAY;AACtC,eAAO,EAAE,2BAA2B;AAAA,MAAA,WAC7B,SAAS,UAAU,kBAAkB;AAC5C,eAAO,EAAE,yCAAyC;AAAA,MAAA;AAAA,IACtD,CACH;AAED,UAAM,aAAa;AAAA,MAAS,MACxB,SAAS,UAAU,aAAa,EAAE,wBAAwB,IAAI,EAAE,kCAAkC;AAAA,IACtG;AACA,UAAM,gBAAgB;AAAA,MAAS,MAC3B,SAAS,UAAU,UAAU,EAAE,kCAAkC,IAAI,EAAE,2BAA2B;AAAA,IACtG;AACA,UAAM,gBAAgB,SAAS,MAAM,EAAE,2BAA2B,CAAC;AAE7D,UAAA,mBAAmB,SAAS,MAAM;AAC7B,aAAA;AAAA,QACH,OAAO;AAAA,QACP,UAAU,SAAS,UAAU,UAAU,sBAAsB;AAAA,QAC7D,UAAU;AAAA,MACd;AAAA,IAAA,CACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../../../../woonuxt_base/app/components/forms/LoginAndRegister.vue"],"sourcesContent":["<template>\n    <div class=\"max-w-lg mx-auto my-16 min-h-[600px] lg:my-24\">\n        <div class=\"flex flex-col items-center\">\n            <Logo class=\"mb-6 scale-125\" />\n            <h1 class=\"text-xl font-semibold lg:text-3xl\">{{ formTitle }}</h1>\n            <div\n                v-if=\"formView === 'login'\"\n                class=\"my-2 text-center\"\n            >\n                {{ $t('messages.account.noAccount') }}\n                <a\n                    class=\"font-semibold cursor-pointer text-primary\"\n                    @click=\"navigate('register')\"\n                >\n                    {{ $t('messages.account.accountRegister') }} </a\n                >.\n            </div>\n            <div\n                v-if=\"formView === 'register'\"\n                class=\"my-2 text-center\"\n            >\n                {{ $t('messages.account.hasAccount') }}\n                <a\n                    class=\"font-semibold cursor-pointer text-primary\"\n                    @click=\"navigate('login')\"\n                >\n                    {{ $t('messages.general.please') }} {{ $t('messages.account.accountLogin') }}\n                </a>\n                .\n            </div>\n        </div>\n\n        <form\n            class=\"mt-6\"\n            @submit.prevent=\"handleFormSubmit(userInfo)\"\n        >\n            <label\n                v-if=\"formView === 'register' || formView === 'forgotPassword'\"\n                for=\"email\"\n            >\n                {{ emailLabel }}\n                <span class=\"text-red-500\">*</span> <br />\n                <input\n                    id=\"email\"\n                    v-model=\"userInfo.email\"\n                    :placeholder=\"inputPlaceholder.email\"\n                    autocomplete=\"email\"\n                    type=\"text\"\n                    required\n                />\n            </label>\n            <p\n                v-if=\"formView === 'forgotPassword'\"\n                class=\"text-sm text-gray-500\"\n            >\n                {{ $t('messages.account.enterEmailOrUsernameForReset') }}\n            </p>\n            <div v-if=\"formView !== 'forgotPassword'\">\n                <label for=\"username\">\n                    {{ usernameLabel }}\n                    <span class=\"text-red-500\">*</span> <br />\n                    <input\n                        id=\"username\"\n                        v-model=\"userInfo.username\"\n                        :placeholder=\"inputPlaceholder.username\"\n                        autocomplete=\"username\"\n                        type=\"text\"\n                        required\n                    />\n                </label>\n                <label for=\"password\">\n                    {{ passwordLabel }} <span class=\"text-red-500\">*</span> <br />\n                    <PasswordInput\n                        id=\"password\"\n                        className=\"border rounded-lg w-full p-3 px-4 bg-white\"\n                        v-model=\"userInfo.password\"\n                        :placeholder=\"inputPlaceholder.password\"\n                        :autocomplete=\"formView === 'login' ? 'current-password' : 'new-password'\"\n                        :required=\"true\"\n                    />\n                </label>\n            </div>\n            <Transition\n                name=\"scale-y\"\n                mode=\"out-in\"\n            >\n                <div\n                    v-if=\"message\"\n                    class=\"my-4 text-sm text-green-500\"\n                    v-html=\"message\"\n                ></div>\n            </Transition>\n            <Transition\n                name=\"scale-y\"\n                mode=\"out-in\"\n            >\n                <div\n                    v-if=\"errorMessage\"\n                    class=\"my-4 text-sm text-red-500\"\n                    v-html=\"errorMessage\"\n                ></div>\n            </Transition>\n            <button class=\"flex items-center justify-center gap-4 mt-4 text-lg\">\n                <LoadingIcon\n                    v-if=\"isPending\"\n                    stroke=\"4\"\n                    size=\"16\"\n                    color=\"#fff\"\n                />\n                <span>{{ buttonText }}</span>\n            </button>\n        </form>\n        <div\n            class=\"my-8 text-center cursor-pointer\"\n            @click=\"navigate('forgotPassword')\"\n            v-if=\"formView === 'login'\"\n        >\n            {{ $t('messages.account.forgotPassword') }}\n        </div>\n        <div\n            class=\"my-8 text-center cursor-pointer\"\n            @click=\"navigate('login')\"\n            v-if=\"formView === 'forgotPassword'\"\n        >\n            {{ $t('messages.account.backToLogin') }}\n        </div>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { t } = useI18n()\nconst route = useRoute()\nconst router = useRouter()\nconst { loginUser, isPending, registerUser, sendResetPasswordEmail } = useAuth()\nconst userInfo = ref({ email: '', password: '', username: '' })\nconst formView = ref('login')\nconst message = ref('')\nconst errorMessage = ref('')\n\nconst updateFormView = () => {\n    if (route.query.action === 'forgotPassword') {\n        formView.value = 'forgotPassword'\n    } else if (route.query.action === 'register') {\n        formView.value = 'register'\n    } else {\n        formView.value = 'login'\n    }\n}\nwatch(route, updateFormView, { immediate: true })\n\nconst login = async (userInfo) => {\n    const { success, error } = await loginUser(userInfo)\n    switch (error) {\n        case 'invalid_username':\n            errorMessage.value = t('messages.error.invalidUsername')\n            break\n        case 'incorrect_password':\n            errorMessage.value = t('messages.error.incorrectPassword')\n            break\n        default:\n            errorMessage.value = error\n            break\n    }\n\n    if (success) {\n        errorMessage.value = ''\n        message.value = t('messages.account.loggingIn')\n    }\n}\n\nconst handleFormSubmit = async (userInfo) => {\n    if (formView.value === 'register') {\n        const { success, error } = await registerUser(userInfo)\n        if (success) {\n            errorMessage.value = ''\n            message.value = t('messages.account.accountCreated') + ' ' + t('messages.account.loggingIn')\n            setTimeout(() => {\n                login(userInfo)\n            }, 2000)\n        } else {\n            errorMessage.value = error\n        }\n    } else if (formView.value === 'forgotPassword') {\n        resetPassword(userInfo)\n    } else {\n        login(userInfo)\n    }\n}\n\nconst resetPassword = async (userInfo) => {\n    const { success, error } = await sendResetPasswordEmail(userInfo.email)\n    if (success) {\n        errorMessage.value = ''\n        message.value = t('messages.account.ifRegistered')\n    } else {\n        errorMessage.value = error\n    }\n}\n\nconst navigate = (view: string) => {\n    formView.value = view\n    if (view === 'forgotPassword') {\n        router.push({ query: { action: 'forgotPassword' } })\n    } else if (view === 'register') {\n        router.push({ query: { action: 'register' } })\n    } else {\n        router.push({ query: {} })\n    }\n}\n\nconst formTitle = computed(() => {\n    if (formView.value === 'login') {\n        return t('messages.account.loginToAccount')\n    } else if (formView.value === 'register') {\n        return t('messages.account.accountRegister')\n    } else if (formView.value === 'forgotPassword') {\n        return t('messages.account.forgotPassword')\n    }\n})\n\nconst buttonText = computed(() => {\n    if (formView.value === 'login') {\n        return t('messages.account.login')\n    } else if (formView.value === 'register') {\n        return t('messages.account.register')\n    } else if (formView.value === 'forgotPassword') {\n        return t('messages.account.sendPasswordResetEmail')\n    }\n})\n\nconst emailLabel = computed(() =>\n    formView.value === 'register' ? t('messages.billing.email') : t('messages.account.emailOrUsername'),\n)\nconst usernameLabel = computed(() =>\n    formView.value === 'login' ? t('messages.account.emailOrUsername') : t('messages.account.username'),\n)\nconst passwordLabel = computed(() => t('messages.account.password'))\n\nconst inputPlaceholder = computed(() => {\n    return {\n        email: 'johndoe@email.com',\n        username: formView.value === 'login' ? 'johndoe@email.com' : 'johndoe',\n        password: '********',\n    }\n})\n</script>\n\n<style lang=\"postcss\" scoped>\ninput,\nbutton {\n    @apply border rounded-lg mb-4 w-full p-3 px-4 bg-white;\n}\n\nform button {\n    @apply rounded-lg font-bold bg-gray-800 text-white py-3 px-8 hover:bg-gray-800;\n}\n</style>\n"],"version":3}