import{d as N,P as V,a0 as D,L as P,b as g,o,c as w,t as j,i as h,I as A,F as E,r as T,a as R,$ as W,_ as H,m as Q,M as U,W as G,h as $,w as F,e as M,v as J,g as K}from"./Dwb8sLJR.js";import{_ as X}from"./BRcODKMk.js";const Y={key:0,class:"red-badge"},Z=N({__name:"SaleBadge",props:{node:{type:Object,required:!0}},setup(e){const{t:s}=V(),{storeSettings:c}=D(),l=P(()=>{var f,p,y,x;if(!((f=e.node)!=null&&f.rawSalePrice)||!((p=e.node)!=null&&p.rawRegularPrice))return"";const r=parseFloat((y=e.node)==null?void 0:y.rawSalePrice),m=parseFloat((x=e.node)==null?void 0:x.rawRegularPrice);return Math.round((r-m)/m*100)+" %"}),d=P(()=>e.node.rawSalePrice&&c.saleBadge!=="hidden"),_=P(()=>(c==null?void 0:c.saleBadge)==="percent"?l.value:s("messages.shop.onSale")?s("messages.shop.onSale"):"Sale");return(r,m)=>g(d)?(o(),w("span",Y,j(g(_)),1)):h("",!0)}}),ee=Object.assign(A(Z,[["__scopeId","data-v-3192fff7"]]),{__name:"SaleBadge"}),te={class:"inline-flex items-center"},ne={key:0,class:"text-xs ml-1 text-gray-500"},ae=N({__name:"StarRating",props:{rating:{type:Number,default:0},count:{type:Number,default:null},hideCount:{type:Boolean,default:!1},size:{type:Number,default:14}},setup(e){return(s,c)=>{const l=H;return o(),w("div",te,[(o(),w(E,null,T(5,d=>R(l,{key:d,name:"ion:star",size:e.size+"",class:"mr-[2px]",style:W({color:e.rating<d?"#ccc":"#FBBE24"})},null,8,["size","style"])),64)),e.count!==null&&!e.hideCount?(o(),w("span",ne,"("+j(e.count)+")",1)):h("",!0)])}}}),oe=Object.assign(ae,{__name:"StarRating"}),se={class:"relative group"},ce={class:"p-2"},le={class:"mb-2 font-light leading-tight group-hover:text-primary"},O=280,re=N({__name:"ProductCard",props:{node:{type:Object,required:!0},index:{type:Number,default:1}},setup(e){var p,y,x,I;const s=Q(),{storeSettings:c}=D(),l=e,d=Math.round(O*1.125),_=U((p=s.query)==null?void 0:p.filter),r=U(((I=(x=(y=_.value)==null?void 0:y.split("pa_color[")[1])==null?void 0:x.split("]")[0])==null?void 0:I.split(","))||[]);G(()=>s.query,()=>{var n,a,t;_.value=s.query.filter,r.value=((t=(a=(n=_.value)==null?void 0:n.split("pa_color[")[1])==null?void 0:a.split("]")[0])==null?void 0:t.split(","))||[]});const m=P(()=>{var n,a,t,u;return((a=(n=l.node)==null?void 0:n.image)==null?void 0:a.sourceUrl)||((u=(t=l.node)==null?void 0:t.image)==null?void 0:u.producCardSourceUrl)||"/images/placeholder.jpg"}),f=P(()=>{var n,a,t,u,v,B;if(r.value.length){const i=(a=(n=l.node)==null?void 0:n.variations)==null?void 0:a.nodes.filter(S=>{var q;const C=(q=S.attributes)==null?void 0:q.nodes.some(b=>r.value.some(k=>{var z;return(z=b==null?void 0:b.value)==null?void 0:z.includes(k)})),L=r.value.some(b=>{var k;return(k=S.slug)==null?void 0:k.includes(b)});return C||L});if(i!=null&&i.length)return((u=(t=i[0])==null?void 0:t.image)==null?void 0:u.producCardSourceUrl)||((B=(v=i[0])==null?void 0:v.image)==null?void 0:B.sourceUrl)||m.value}return m.value});return(n,a)=>{const t=ee,u=J,v=K,B=oe,i=X;return o(),w("div",se,[e.node.slug?(o(),$(v,{key:0,to:`/product/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:F(()=>{var S,C;return[R(t,{node:e.node,class:"absolute top-2 right-2"},null,8,["node"]),g(f)?(o(),$(u,{key:0,width:O,height:g(d),src:g(f),format:"webp",quality:"80",alt:((S=e.node.image)==null?void 0:S.altText)||e.node.name||"Product image",title:((C=e.node.image)==null?void 0:C.title)||e.node.name,loading:e.index<=3?"eager":"lazy",class:"rounded-lg object-top object-contain w-full aspect-9/8",placeholder:"","placeholder-class":"blur-xl"},null,8,["height","src","alt","title","loading"])):h("",!0)]}),_:1},8,["to","title"])):h("",!0),M("div",ce,[g(c).showReviews?(o(),$(B,{key:0,rating:e.node.averageRating,count:e.node.reviewCount},null,8,["rating","count"])):h("",!0),e.node.slug?(o(),$(v,{key:1,to:`/product/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:F(()=>[M("h2",le,j(e.node.name),1)]),_:1},8,["to","title"])):h("",!0),R(i,{class:"text-sm","sale-price":e.node.salePrice,"regular-price":e.node.regularPrice},null,8,["sale-price","regular-price"])])])}}}),de=Object.assign(re,{__name:"ProductCard"});export{ee as _,oe as a,de as b};
